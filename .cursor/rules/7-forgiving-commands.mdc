---
description: Agent tool descriptions must be clear and include common variations for better intent detection
globs:
  - "services/agentService.js"
---

# Clear and Descriptive Agent Tools

Agent tool descriptions should be **clear, detailed, and include common usage patterns** so Gemini can accurately detect user intent.

---

## ğŸ¯ Core Principle

**Gemini 2.5 Flash naturally understands variations, but clear tool descriptions help it make better decisions!**

The Agent uses **Gemini Functions API** which means:
- âœ… Natural language understanding (Hebrew + English)
- âœ… Automatic conjugation handling
- âœ… Context-aware intent detection

**However**, good tool descriptions make the Agent smarter.

---

## ğŸ“‹ Implementation Guidelines

### 1ï¸âƒ£ **Tool Declaration - Be Descriptive**

When creating tools in `agentService.js`, write clear descriptions:

```javascript
// âœ… Good - Clear and includes variations
create_image: {
  declaration: {
    name: 'create_image',
    description: '×™×¦×•×¨ ×ª××•× ×” ×—×“×©×”. ×ª×•××š ×‘-3 ×¡×¤×§×™×: gemini (×‘×¨×™×¨×ª ××—×“×œ, ××”×™×¨), openai (××™×›×•×ª×™, ×§×¨×™××™×™×˜×™×‘×™), grok (×¨×™××œ×™×¡×˜×™ ×××•×“). Use for: create image, generate picture, make illustration, draw, ×¦×•×¨ ×ª××•× ×”, ×¦×™×™×¨, ×”×¤×§ ××™×•×¨.',
    // ...
  }
}

// âŒ Bad - Too vague
create_image: {
  declaration: {
    name: 'create_image',
    description: 'Creates an image',
    // ...
  }
}
```

**Why?** Gemini uses the description to understand **when** to use this tool.

---

### 2ï¸âƒ£ **Include Common Phrasings**

Mention common ways users might express the intent:

```javascript
text_to_speech: {
  declaration: {
    name: 'text_to_speech',
    description: '×”××¨ ×˜×§×¡×˜ ×œ×“×™×‘×•×¨ (text-to-speech). ×ª×•××š ×‘-22 ×©×¤×•×ª. Use when user says: "×××•×¨", "×”×§×¨×", "×‘×§×•×œ", "say", "speak", "read aloud", "voice".',
    // ...
  }
}
```

---

### 3ï¸âƒ£ **System Prompt Reinforcement**

The system prompt should guide the Agent on being forgiving:

```javascript
const systemInstruction = `
...
ğŸ’¡ ×›×œ×œ×™× ×§×¨×™×˜×™×™×:

âš™ï¸ **×›×œ×œ×™× ×›×œ×œ×™×™×:**
â€¢ ×ª×©×™×‘ ×‘×¢×‘×¨×™×ª, ×˜×‘×¢×™ ×•× ×¢×™×
â€¢ **×ª×”×™×” ×¡×œ×—× ×™** - ×”×‘×Ÿ ×•×¨×™××¦×™×•×ª ×©×•× ×•×ª ×©×œ ××•×ª×” ×‘×§×©×”
â€¢ ×× ×œ× ×‘×˜×•×— - ×©××œ ×”×‘×”×¨×” ×‘××§×•× ×œ× ×—×©
...
`;
```

---

## âœ… Best Practices

### Do:
- âœ… Include both Hebrew and English in descriptions
- âœ… Mention common synonyms and variations
- âœ… Use examples in tool descriptions
- âœ… Trust Gemini to understand conjugations

### Don't:
- âŒ Write only minimal descriptions
- âŒ Assume users will use exact phrasing
- âŒ Over-specify - Gemini is smart!

---

## ğŸ¯ Goal

**Natural user experience** - users can phrase requests in any reasonable way, and the Agent will understand!

---

## Key Differences from Old Architecture

### Old (Regex-based):
- âŒ Required explicit patterns for every variation
- âŒ Needed all conjugations: ××—×§|××—×§×™|××—×§×•|×ª××—×§...
- âŒ Case-sensitive without `/i` flag
- âŒ High maintenance - add patterns for every new phrasing

### New (Agent with Gemini 2.5 Flash):
- âœ… Natural language understanding built-in
- âœ… Understands conjugations automatically
- âœ… Context-aware (knows "×©×•×‘" means "retry")
- âœ… Low maintenance - just write clear tool descriptions

**Result:** The Agent is **naturally forgiving** - focus on clear tool descriptions, not exhaustive pattern matching! ğŸš€
