# Tasker Server - Cursor Rules

## 7-forgiving-commands
**פקודות סלחניות - תמיכה מלאה בהטיות עבריות**

כל פקודה או זיהוי intent חייבים להיות סלחניים כלפי המשתמש ולכלול את **כל ההטיות האפשריות**:

### דוגמה - פעלי עריכה:
```javascript
// ✅ נכון - כל ההטיות:
const isEditRequest = /מחק|מחקי|מחקו|תמחק|תמחקי|תמחקו|הורד|הורידי|הורידו|תוריד|תורידי|תורידו/i

// ❌ שגוי - רק צורה אחת:
const isEditRequest = /מחק|הורד|תוריד/i
```

### כללי הטיות עבריות:
1. **זכר יחיד**: מחק, תמחק, הורד, תוריד
2. **נקבה יחידה**: מחקי, תמחקי, הורידי, תורידי  
3. **רבים**: מחקו, תמחקו, הורידו, תורידו
4. **צורות בסיס**: סיר, צור, צייר, שנה, שפר

### יישום - 2 מסלולי זיהוי:

#### 1️⃣ Regex Heuristic (כשה-LLM Router כבוי):
- כל regex של intent detection צריך לכלול את כל ההטיות
- ב-Hebrew, אין להשתמש ב-`\b` (word boundaries) - לא עובד עם תווים עבריים
- דוגמה: `const isEditRequest = /מחק|מחקי|מחקו|תמחק|תמחקי|תמחקו.../i`

#### 2️⃣ LLM Router Prompt (כשה-LLM Router דלוק):
- הפרומפט ב-`buildRouterPrompt()` חייב לכלול את כל ההטיות
- יש לרשום בפירוש: "WITH ALL HEBREW CONJUGATIONS (male/female/plural)"
- דוגמה: `Remove: "הסר", "סיר", "תסיר", "תסירי", "תסירו", "מחק", "מחקי", "מחקו"...`

### חשוב ביותר:
**כל פקודה חדשה חייבת לעבוד בשני המסלולים!**
- עדכן גם את ה-Regex
- עדכן גם את ה-LLM Prompt

### מטרה:
המשתמש לא צריך לחשוב איך לנסח - הבוט צריך להבין כל נוסח סביר!

